{
    "info": {
        "_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
        "name": "Template Management API",
        "description": "Collection for managing WhatsApp message templates",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Authentication",
            "item": [
                {
                    "name": "Login",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Content-Type", "value": "application/json" }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"{{username}}\",\n    \"password\": \"{{password}}\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/auth/login",
                            "host": ["{{base_url}}"],
                            "path": ["api", "auth", "login"]
                        },
                        "description": "Login to get authentication token"
                    }
                }
            ]
        },
        {
            "name": "Templates",
            "item": [
                {
                    "name": "Create Template",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Authorization", "value": "Bearer {{auth_token}}" },
                            { "key": "Content-Type", "value": "application/json" },
                            { "key": "x-api-key", "value": "{{api_key}}" }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"welcome_message\",\n    \"content\": \"Hello {{name}}, welcome to our service!\",\n    \"category\": \"marketing\",\n    \"language\": \"en\",\n    \"variables\": [\n        {\n            \"name\": \"name\",\n            \"type\": \"string\",\n            \"required\": true\n        }\n    ]\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/templates",
                            "host": ["{{base_url}}"],
                            "path": ["api", "templates"]
                        },
                        "description": "Create a new message template"
                    }
                },
                {
                    "name": "Get All Templates",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Authorization", "value": "Bearer {{auth_token}}" },
                            { "key": "x-api-key", "value": "{{api_key}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/templates",
                            "host": ["{{base_url}}"],
                            "path": ["api", "templates"]
                        },
                        "description": "Get all templates for the authenticated user"
                    }
                },
                {
                    "name": "Get Template by ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Authorization", "value": "Bearer {{auth_token}}" },
                            { "key": "x-api-key", "value": "{{api_key}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/templates/{{template_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["api", "templates", "{{template_id}}"]
                        },
                        "description": "Get a specific template by ID"
                    }
                },
                {
                    "name": "Update Template",
                    "request": {
                        "method": "PUT",
                        "header": [
                            { "key": "Authorization", "value": "Bearer {{auth_token}}" },
                            { "key": "Content-Type", "value": "application/json" },
                            { "key": "x-api-key", "value": "{{api_key}}" }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"updated_welcome_message\",\n    \"content\": \"Hi {{name}}, thanks for joining us!\",\n    \"category\": \"marketing\",\n    \"language\": \"en\",\n    \"variables\": [\n        {\n            \"name\": \"name\",\n            \"type\": \"string\",\n            \"required\": true\n        }\n    ]\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/templates/{{template_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["api", "templates", "{{template_id}}"]
                        },
                        "description": "Update an existing template"
                    }
                },
                {
                    "name": "Get Pending Templates",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Authorization", "value": "Bearer {{auth_token}}" },
                            { "key": "x-api-key", "value": "{{api_key}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/templates/pending",
                            "host": ["{{base_url}}"],
                            "path": ["api", "templates", "pending"]
                        },
                        "description": "Get all pending templates (admin only)"
                    }
                },
                {
                    "name": "Approve Template",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Authorization", "value": "Bearer {{auth_token}}" },
                            { "key": "x-api-key", "value": "{{api_key}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/templates/{{template_id}}/approve",
                            "host": ["{{base_url}}"],
                            "path": ["api", "templates", "{{template_id}}", "approve"]
                        },
                        "description": "Approve a template (admin only)"
                    }
                },
                {
                    "name": "Reject Template",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Authorization", "value": "Bearer {{auth_token}}" },
                            { "key": "Content-Type", "value": "application/json" },
                            { "key": "x-api-key", "value": "{{api_key}}" }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"reason\": \"Not suitable for campaign\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/templates/{{template_id}}/reject",
                            "host": ["{{base_url}}"],
                            "path": ["api", "templates", "{{template_id}}", "reject"]
                        },
                        "description": "Reject a template (admin only)"
                    }
                },
                {
                    "name": "Delete Template",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            { "key": "Authorization", "value": "Bearer {{auth_token}}" },
                            { "key": "x-api-key", "value": "{{api_key}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/templates/{{template_id}}",
                            "host": ["{{base_url}}"],
                            "path": ["api", "templates", "{{template_id}}"]
                        },
                        "description": "Delete a template"
                    }
                }
            ]
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [""]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Save template ID from create/update response",
                    "if (pm.info.requestName === \"Create Template\" || pm.info.requestName === \"Update Template\") {",
                    "    var jsonData = pm.response.json();",
                    "    if (jsonData.success && jsonData.data && jsonData.data._id) {",
                    "        pm.environment.set(\"template_id\", jsonData.data._id);",
                    "    }",
                    "}",
                    "",
                    "// Save auth token from login response",
                    "if (pm.info.requestName === \"Login\") {",
                    "    var jsonData = pm.response.json();",
                    "    if (jsonData.success && jsonData.data && jsonData.data.token) {",
                    "        pm.environment.set(\"auth_token\", jsonData.data.token);",
                    "    }",
                    "}"
                ]
            }
        }
    ]
} 