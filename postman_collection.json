{
  "info": {
    "name": "Complete API Flow Tests",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Login as Super Admin",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"username\":\"superadmin1\",\"password\":\"admin123\"}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/auth/login",
          "host": ["{{baseUrl}}"],
          "path": ["api", "auth", "login"]
        }
      }
    },
    {
      "name": "2. Create Category",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"name\":\"Test Category\",\"description\":\"Category for testing\",\"creditCost\":10,\"isActive\":true}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/categories",
          "host": ["{{baseUrl}}"],
          "path": ["api", "categories"]
        }
      }
    },
    {
      "name": "3. Create Test User",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"username\":\"testuser1\",\"password\":\"test123\",\"role\":\"user\"}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/auth/register",
          "host": ["{{baseUrl}}"],
          "path": ["api", "auth", "register"]
        }
      }
    },
    {
      "name": "4. Login as Test User",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"username\":\"testuser1\",\"password\":\"test123\"}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/auth/login",
          "host": ["{{baseUrl}}"],
          "path": ["api", "auth", "login"]
        }
      }
    },
    {
      "name": "5. Add Credits to User",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"userId\":\"{{userId}}\",\"categoryId\":\"{{categoryId}}\",\"amount\":100,\"description\":\"Initial credit allocation\"}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/credits/add",
          "host": ["{{baseUrl}}"],
          "path": ["api", "credits", "add"]
        }
      }
    },
    {
      "name": "6. Create Campaign",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"name\":\"Test Campaign\",\"type\":\"VIRTUAL_QUICK\",\"message\":{\"text\":\"Test message from WhatsApp API\"},\"recipients\":[{\"phoneNumber\":\"{{recipientPhoneNumber}}\"}],\"schedule\":{\"startAt\":\"{{scheduleStartTime}}\",\"timezone\":\"UTC\"}}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/campaigns",
          "host": ["{{baseUrl}}"],
          "path": ["api", "campaigns"]
        }
      }
    },
    {
      "name": "7. View All Transactions",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/api/credits/transactions/user/{{userId}}",
          "host": ["{{baseUrl}}"],
          "path": ["api", "credits", "transactions", "user", "{{userId}}"]
        }
      }
    }
  ]
} 